<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Michael Jay Lissner</title><link href="http://michaeljaylissner.com/" rel="alternate"></link><link href="http://michaeljaylissner.com/feeds/tag/mysql" rel="self"></link><id>http://michaeljaylissner.com/</id><updated>2010-04-26T11:26:38-07:00</updated><entry><title>How to Recover a Broken Drupal Install Resulting from a Full HardÂ Drive</title><link href="http://michaeljaylissner.com/posts/2010/04/26/recover-a-broken-drupal-install-from-full-hd/" rel="alternate"></link><updated>2010-04-26T11:26:38-07:00</updated><author><name>Mike Lissner</name></author><id>tag:michaeljaylissner.com,2010-04-26:posts/2010/04/26/recover-a-broken-drupal-install-from-full-hd/</id><summary type="html">&lt;p&gt;This is amazingly, the second time I&amp;#8217;ve filled my server&amp;#8217;s hard drive, and the results are becoming predictable. One moment, things are working fine, the next, cron alerts you with something like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Table&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tablename&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;marked&lt;/span&gt; &lt;span class="n"&gt;as&lt;/span&gt; &lt;span class="n"&gt;crashed&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;automatic&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;repair&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is a bad warning to get, and running df on the server confirms that indeed my hard drive is full. Fixing this is a matter of doing some minor MySQL hacking to clean up all the&amp;nbsp;tables:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mysql -u&lt;span class="s1"&gt;&amp;#39;drupalusername&amp;#39;&lt;/span&gt; -p
&amp;gt; use drupal_DB_name;
&amp;gt; check table tablename;
&amp;gt; repair table tablename;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, simply iterate this for each broken table reported by cron.php, and you will soon have a repaired &lt;span class="caps"&gt;DB&lt;/span&gt;.&amp;nbsp;Whew.&lt;/p&gt;</summary><category term="mysql"></category><category term="hard drive"></category><category term="drupal"></category></entry></feed>